<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Welcome to Emma - Your AI Memory Companion</title>
  <style>
    /* Emma Brand Variables */
    :root {
      --emma-gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      --emma-gradient-2: linear-gradient(135deg, #4f46e5 0%, #7c3aed 50%, #a855f7 100%);
      --emma-bg-gradient: linear-gradient(135deg, #1a1033 0%, #2d1b69 50%, #0f0c29 100%);
      --emma-purple: #764ba2;
      --emma-pink: #f093fb;
      --emma-dark: #1a1033;
      --emma-card-bg: rgba(255, 255, 255, 0.05);
      --emma-border: rgba(255, 255, 255, 0.1);
      --emma-text: #ffffff;
      --emma-text-secondary: rgba(255, 255, 255, 0.7);
      --emma-text-tertiary: rgba(255, 255, 255, 0.5);
      --emma-success: #4ade80;
      --emma-error: #f87171;
      --emma-warning: #fbbf24;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: var(--emma-bg-gradient);
      color: var(--emma-text);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Animated background */
    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 20% 20%, rgba(102, 126, 234, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(240, 147, 251, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 40% 60%, rgba(118, 75, 162, 0.2) 0%, transparent 50%);
      animation: float 20s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      50% { transform: translate(-20px, -20px) rotate(180deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    /* Header Section */
    .hero-section {
      text-align: center;
      padding: 48px 20px 40px;
      background: var(--emma-card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--emma-border);
      border-radius: 24px;
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }

    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--emma-gradient-1);
    }

    .emma-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-bottom: 32px;
      padding: 8px 0;
      text-align: center;
    }

    .emma-orb-container {
      width: 96px;
      height: 96px;
      position: relative;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Ensure orb is visible */
    .emma-orb-container > * {
      width: 96px !important;
      height: 96px !important;
    }

    .emma-orb-canvas {
      width: 100% !important;
      height: 100% !important;
      border-radius: 50%;
      filter: drop-shadow(0 4px 16px rgba(118, 75, 162, 0.3));
    }

    .emma-header-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .emma-title {
      font-size: 48px;
      font-weight: 700;
      letter-spacing: 1px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 4px;
    }

    .emma-subtitle {
      font-size: 18px;
      color: var(--emma-text-secondary);
      font-weight: 300;
      letter-spacing: 0.5px;
    }

    .hero-description {
      font-size: 18px;
      color: var(--emma-text-secondary);
      max-width: 600px;
      margin: 0 auto 32px;
      line-height: 1.6;
    }

    .mtap-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid var(--emma-border);
      border-radius: 24px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      color: var(--emma-warning);
    }

    /* Vault Setup Section - Compact */
    .vault-setup-compact {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border: 1px solid var(--emma-border);
      border-radius: 16px;
      padding: 24px;
      margin-top: 32px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .vault-setup-compact.hidden {
      display: none;
    }

    .vault-header-compact {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
      text-align: left;
    }

    .vault-icon-compact {
      font-size: 32px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
      flex-shrink: 0;
    }

    .vault-text-compact h3 {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
      color: var(--emma-text);
      background: var(--emma-gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .vault-text-compact p {
      margin: 4px 0 0 0;
      font-size: 14px;
      opacity: 0.8;
      color: var(--emma-text-secondary);
    }

    .vault-form-compact {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .form-row-compact {
      display: flex;
      gap: 12px;
    }

    .form-input-compact {
      flex: 1;
      padding: 14px 18px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--emma-border);
      border-radius: 10px;
      color: var(--emma-text);
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .form-input-compact:focus {
      outline: none;
      border-color: var(--emma-purple);
      background: rgba(255, 255, 255, 0.1);
      box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
    }

    .form-input-compact::placeholder {
      color: var(--emma-text-tertiary);
    }

    .btn-primary-compact {
      background: var(--emma-gradient-1);
      border: none;
      border-radius: 10px;
      color: white;
      padding: 14px 24px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      align-self: center;
      min-width: 180px;
    }

    .btn-primary-compact:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(118, 75, 162, 0.4);
    }

    .btn-primary-compact:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .btn-icon {
      font-size: 16px;
    }

    .vault-status-compact {
      min-height: 20px;
      font-size: 13px;
      color: var(--emma-error);
      text-align: center;
      padding: 8px;
      border-radius: 6px;
    }

    .vault-status-compact.error {
      background: rgba(248, 113, 113, 0.1);
      border: 1px solid rgba(248, 113, 113, 0.3);
    }

    .vault-status-compact.loading {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.3);
      color: #3b82f6;
    }

    .vault-success-compact {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: 8px;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: #22c55e;
      font-size: 14px;
      font-weight: 500;
      animation: slideInWelcome 0.3s ease;
    }

    @keyframes slideInWelcome {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .success-icon {
      font-size: 16px;
    }

    .vault-icon {
      font-size: 64px;
      margin-bottom: 24px;
      display: block;
    }

    .vault-setup-section h2 {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 16px;
      background: var(--emma-gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .vault-setup-section p {
      font-size: 16px;
      color: var(--emma-text-secondary);
      margin-bottom: 40px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .vault-form {
      max-width: 400px;
      margin: 0 auto;
    }

    .form-group {
      margin-bottom: 24px;
      text-align: left;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--emma-text);
      margin-bottom: 8px;
    }

    .form-input {
      width: 100%;
      padding: 16px 20px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--emma-border);
      border-radius: 12px;
      color: var(--emma-text);
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--emma-purple);
      box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
      background: rgba(255, 255, 255, 0.08);
    }

    .form-input::placeholder {
      color: var(--emma-text-tertiary);
    }

    .password-strength {
      margin-top: 8px;
      font-size: 12px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .strength-weak { color: var(--emma-error); }
    .strength-medium { color: var(--emma-warning); }
    .strength-strong { color: var(--emma-success); }

    .create-vault-btn {
      width: 100%;
      padding: 16px 32px;
      background: var(--emma-gradient-1);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 16px;
    }

    .create-vault-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(118, 75, 162, 0.4);
    }

    .create-vault-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .vault-status {
      margin-top: 16px;
      padding: 12px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
    }

    .vault-status.success {
      background: rgba(74, 222, 128, 0.1);
      color: var(--emma-success);
      border: 1px solid rgba(74, 222, 128, 0.3);
    }

    .vault-status.error {
      background: rgba(248, 113, 113, 0.1);
      color: var(--emma-error);
      border: 1px solid rgba(248, 113, 113, 0.3);
    }

    /* Features Section */
    .features-section {
      margin-bottom: 40px;
    }

    .section-title {
      text-align: center;
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 48px;
      background: var(--emma-gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
    }

    .feature-card {
      background: var(--emma-card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--emma-border);
      border-radius: 20px;
      padding: 32px;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .feature-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gradient);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .feature-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(118, 75, 162, 0.2);
    }

    .feature-card:hover::before {
      opacity: 1;
    }

    .feature-card.ai::before { background: linear-gradient(90deg, #4f46e5, #7c3aed); }
    .feature-card.memory::before { background: linear-gradient(90deg, #f093fb, #764ba2); }
    .feature-card.security::before { background: linear-gradient(90deg, #10b981, #059669); }
    .feature-card.mtap::before { background: linear-gradient(90deg, #f59e0b, #d97706); }

    .feature-icon {
      font-size: 48px;
      margin-bottom: 20px;
      display: block;
    }

    .feature-card h3 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 12px;
      color: var(--emma-text);
    }

    .feature-card p {
      color: var(--emma-text-secondary);
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .feature-highlights {
      list-style: none;
      text-align: left;
    }

    .feature-highlights li {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--emma-text-secondary);
    }

    .feature-highlights li::before {
      content: '‚ú®';
      font-size: 12px;
    }

    /* Human Memory Layer Section */
    .hml-section {
      background: var(--emma-card-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--emma-border);
      border-radius: 24px;
      padding: 48px;
      margin-bottom: 40px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hml-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #f093fb, #667eea, #764ba2);
    }

    .hml-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 16px;
      background: linear-gradient(90deg, #f093fb, #667eea);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hml-description {
      font-size: 18px;
      color: var(--emma-text-secondary);
      margin-bottom: 32px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.7;
    }

    .hml-features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 24px;
      margin-top: 32px;
    }

    .hml-feature {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 24px;
      text-align: center;
    }

    .hml-feature-icon {
      font-size: 32px;
      margin-bottom: 12px;
      display: block;
    }

    .hml-feature h4 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--emma-text);
    }

    .hml-feature p {
      font-size: 14px;
      color: var(--emma-text-tertiary);
      line-height: 1.5;
    }

    /* Action Section */
    .action-section {
      text-align: center;
      padding: 48px 24px;
    }

    .action-buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 16px 32px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
    }

    .btn-primary {
      background: var(--emma-gradient-1);
      color: white;
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--emma-text);
      border: 1px solid var(--emma-border);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(118, 75, 162, 0.3);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 16px;
      }
      
      .hero-section {
        padding: 48px 20px 40px;
      }
      
      .emma-brand h1 {
        font-size: 36px;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
      }
      
      .action-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
      }
    }

    /* Hidden states */
    .hidden {
      display: none !important;
    }

    /* Pulse animation for fallback orb */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .vault-success-section {
      background: rgba(74, 222, 128, 0.1);
      border: 1px solid rgba(74, 222, 128, 0.3);
      border-radius: 16px;
      padding: 32px;
      text-align: center;
      margin-top: 24px;
    }

    .vault-success-section h3 {
      color: var(--emma-success);
      font-size: 20px;
      margin-bottom: 12px;
    }

    .vault-success-section p {
      color: var(--emma-text-secondary);
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Hero Section with Vault Setup -->
    <section class="hero-section">
      <div class="emma-header">
        <div class="emma-universal-orb-container"></div>
        <div class="emma-header-content">
          <span class="emma-title">emma</span>
          <span class="emma-subtitle">intelligent memory</span>
        </div>
      </div>
      
      <p class="hero-description">
        Build your personal Human Memory Layer (HML) 
        Emma captures and organizes your memories via MTAP protocol, creating a contextual knowledge base that any AI agent can access to understand you better.
      </p>

      <!-- Compact Vault Setup (moved to top) -->
      <div id="vault-setup-section" class="vault-setup-compact">
        <div class="vault-header-compact">
          <div class="vault-icon-compact">üîê</div>
          <div class="vault-text-compact">
            <h3>Create Your Memory Vault</h3>
            <p>Secure encryption for your memories</p>
          </div>
        </div>
        
        <div class="vault-form-compact">
          <div class="form-row-compact">
            <input 
              type="password" 
              id="vault-passphrase" 
              class="form-input-compact" 
              placeholder="Create passcode"
              autocomplete="new-password"
            >
            <input 
              type="password" 
              id="vault-confirm" 
              class="form-input-compact" 
              placeholder="Confirm passcode"
              autocomplete="new-password"
            >
          </div>
          
          <div id="password-strength" class="password-strength"></div>
          
          <button type="button" id="create-vault-btn" class="btn-primary-compact">
            <span class="btn-icon">üîê</span>
            Create Vault
          </button>
          
          <div id="vault-status" class="vault-status-compact hidden"></div>
          <div id="vault-success" class="vault-success-compact hidden">
            <span class="success-icon">‚úÖ</span>
            <span class="success-text">Vault created successfully!</span>
          </div>
        </div>
      </div>

    </section>

    <!-- Human Memory Layer Section -->
    <section class="hml-section">
      <h2 class="hml-title">Human Memory Layer (HML)</h2>
      <p class="hml-description">
        Emma creates your personal Human Memory Layer - a persistent, contextual knowledge base built from your conversations and experiences. 
        Using the MTAP protocol, Emma captures and organizes your memories so that any AI agent can access them via MCP server, 
        giving every AI assistant deep contextual understanding of who you are and what you've discussed before.
      </p>
      
      <div class="hml-features">
        <div class="hml-feature">
          <div class="hml-feature-icon">üß†</div>
          <h4>Human Memory Capture</h4>
          <p>Records your conversations, thoughts, and experiences</p>
        </div>
        <div class="hml-feature">
          <div class="hml-feature-icon">‚ö°</div>
          <h4>MTAP Protocol</h4>
          <p>Standardized format for memory transport and access</p>
        </div>
        <div class="hml-feature">
          <div class="hml-feature-icon">üåê</div>
          <h4>MCP Server Ready</h4>
          <p>Future AI agents can access your HML for contextual understanding</p>
        </div>
        <div class="hml-feature">
          <div class="hml-feature-icon">üîÑ</div>
          <h4>Contextual AI</h4>
          <p>Every AI interaction becomes more personalized and relevant</p>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
      <h2 class="section-title">Powerful Features</h2>
      
      <div class="features-grid">
        <div class="feature-card ai">
          <div class="feature-icon">ü§ñ</div>
          <h3>Universal AI Support</h3>
          <p>Works seamlessly with all major AI platforms and services.</p>
          <ul class="feature-highlights">
            <li>ChatGPT & GPT-4</li>
            <li>Claude & Anthropic</li>
            <li>Gemini & Bard</li>
            <li>Custom AI endpoints</li>
          </ul>
        </div>
        
        <div class="feature-card memory">
          <div class="feature-icon">üíé</div>
          <h3>Human Memory Capture</h3>
          <p>Automatically captures your conversations and experiences, building your personal memory repository.</p>
          <ul class="feature-highlights">
            <li>Conversation archiving</li>
            <li>Experience logging</li>
            <li>Contextual organization</li>
            <li>Memory interconnection</li>
          </ul>
        </div>
        
        <div class="feature-card security">
          <div class="feature-icon">üîí</div>
          <h3>Privacy First</h3>
          <p>Your memories are encrypted and stored locally. Complete privacy guaranteed.</p>
          <ul class="feature-highlights">
            <li>End-to-end encryption</li>
            <li>Local storage only</li>
            <li>Zero cloud uploads</li>
            <li>PBKDF2 key derivation</li>
          </ul>
        </div>
        
        <div class="feature-card mtap">
          <div class="feature-icon">üåü</div>
          <h3>MTAP Protocol</h3>
          <p>Memory Transport & Access Protocol for capturing and organizing human memories in a standardized format.</p>
          <ul class="feature-highlights">
            <li>Human memory capture</li>
            <li>MCP server integration</li>
            <li>AI agent accessibility</li>
            <li>Contextual knowledge base</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Action Section -->
    <section class="action-section">
      <div class="action-buttons">
        <button class="btn btn-primary" onclick="window.location.href='gallery.html'">
          üíù Beautiful Memory Gallery
        </button>
        <button class="btn btn-secondary" onclick="window.location.href='dashboard.html?constellation=true'">
          üåü Memory Constellation
        </button>
        <button class="btn btn-secondary" onclick="window.location.href='people-emma.html'">
          üë• People
        </button>
        <button class="btn btn-secondary" onclick="window.location.href='options.html'">
          ‚öôÔ∏è Settings
        </button>
      </div>
    </section>
  </div>

  <!-- Emma Orb Script -->
  <script src="../js/emma-orb.js"></script>
  <script src="../js/settings-service.js"></script>
  <script src="../js/base-orb.js"></script>
  <script src="../js/emma-assistant.js"></script>
  <script src="../js/emma-dementia-styles.js"></script>
  <script src="../js/emma-dementia-companion.js"></script>
  <script src="../js/emma-mirror-companion.js"></script>
  <script src="../js/orb-manager.js"></script>
  <!-- Welcome Page Script -->
  <script src="../js/welcome.js"></script>
  
  <!-- Initialize Universal Orb System -->
  <script>
    (function() {
      function initWelcomeOrb() {
        if (window.OrbManager) {
          window.orbManagerInstance = new OrbManager();
          window.orbManagerInstance.init();
          console.log('üéØ Welcome: Universal OrbManager initialized');
        } else {
          console.warn('üéØ Welcome: OrbManager not available');
        }
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initWelcomeOrb);
      } else {
        initWelcomeOrb();
      }
    })();
  </script>
</body>
</html>